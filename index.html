<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>مكتبة العالم - World Library</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            --primary: #0f172a;
            --secondary: #1e293b;
            --accent: #3b82f6;
            --accent-hover: #2563eb;
            --text: #f8fafc;
            --text-muted: #94a3b8;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
        }
        
        .glass {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
        }
        
        .btn-primary {
            background: linear-gradient(90deg, var(--accent), var(--accent-hover));
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4);
        }
        
        .tab-active {
            background: linear-gradient(90deg, var(--accent), var(--accent-hover));
            color: white;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .post-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .post-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }
        
        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 10px;
        }
        
        /* Responsive adjustments */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .tabs-container {
                overflow-x: auto;
                padding-bottom: 10px;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <!-- Header -->
    <header class="glass sticky top-0 z-50 mb-8">
        <div class="container mx-auto px-4 py-4">
            <div class="header-content flex justify-between items-center">
                <div class="flex items-center gap-4">
                    <div class="logo bg-gradient-to-r from-blue-500 to-purple-600 w-12 h-12 rounded-full flex items-center justify-center">
                        <i class="fas fa-book text-white text-xl"></i>
                    </div>
                    <div>
                        <h1 class="text-2xl font-bold">مكتبة العالم</h1>
                        <p class="text-sm text-gray-300">World Library - كل ما تبحث عنه في مكان واحد</p>
                    </div>
                </div>
                
                <div class="flex items-center gap-3">
                    <button id="customerAreaBtn" class="btn-primary flex items-center gap-2">
                        <i class="fas fa-user"></i>
                        مساحة الزبون
                    </button>
                    <button id="adminAccessBtn" class="glass px-4 py-2 rounded-lg flex items-center gap-2">
                        <i class="fas fa-cog"></i>
                        دخول الأدمن
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 pb-12">
        <!-- Tabs Navigation -->
        <div class="tabs-container mb-8">
            <div class="flex gap-2 overflow-x-auto pb-2">
                <button class="tab-btn px-6 py-3 rounded-lg glass transition-all duration-300 tab-active" data-tab="media">
                    <i class="fas fa-tv mr-2"></i>
                    وسائل الإعلام الآلي
                </button>
                <button class="tab-btn px-6 py-3 rounded-lg glass transition-all duration-300" data-tab="electronics">
                    <i class="fas fa-plug mr-2"></i>
                    الأجهزة الكهرو منزلية
                </button>
                <button class="tab-btn px-6 py-3 rounded-lg glass transition-all duration-300" data-tab="games">
                    <i class="fas fa-gamepad mr-2"></i>
                    الألعاب
                </button>
                <button class="tab-btn px-6 py-3 rounded-lg glass transition-all duration-300" data-tab="health">
                    <i class="fas fa-heartbeat mr-2"></i>
                    الصحة ورياضة
                </button>
                <button class="tab-btn px-6 py-3 rounded-lg glass transition-all duration-300" data-tab="phones">
                    <i class="fas fa-mobile-alt mr-2"></i>
                    مقارنة الهواتف
                </button>
            </div>
        </div>

        <!-- Search Section -->
        <div class="search-section mb-8">
            <div class="glass p-6 rounded-xl">
                <div class="flex flex-col md:flex-row gap-4">
                    <div class="flex-1 relative">
                        <input type="text" id="searchInput" placeholder="ابحث بالكلمات المفتاحية داخل الخانة الحالية..." 
                               class="w-full p-4 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                    </div>
                    <div class="flex gap-3">
                        <button id="newPostBtn" class="btn-primary flex items-center gap-2">
                            <i class="fas fa-plus"></i>
                            نشر جديد
                        </button>
                        <button id="promoteBtn" class="glass px-6 py-4 rounded-lg flex items-center gap-2 hover:bg-slate-700 transition-colors">
                            <i class="fas fa-ad"></i>
                            انشر 7 أيام بـ $3
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Content Area -->
        <div id="contentArea" class="fade-in">
            <!-- Default content - will be replaced based on active tab -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Sample posts will be loaded here by JavaScript -->
            </div>
        </div>

        <!-- Compare Phones Section (Hidden by default) -->
        <div id="compareSection" class="hidden fade-in">
            <div class="glass p-6 rounded-xl">
                <h2 class="text-2xl font-bold mb-6 flex items-center gap-3">
                    <i class="fas fa-mobile-alt"></i>
                    مقارنة الهواتف
                </h2>
                <div class="overflow-x-auto">
                    <table class="w-full text-center">
                        <thead>
                            <tr class="bg-slate-800">
                                <th class="p-4">الهاتف</th>
                                <th class="p-4">الشاشة</th>
                                <th class="p-4">المعالج</th>
                                <th class="p-4">الذاكرة</th>
                                <th class="p-4">الكاميرا</th>
                                <th class="p-4">البطارية</th>
                                <th class="p-4">السعر</th>
                            </tr>
                        </thead>
                        <tbody id="compareTable">
                            <!-- Table rows will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>

    <!-- Admin Login Modal -->
    <div id="adminLoginModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden">
        <div class="glass p-8 rounded-xl w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">دخول الأدمن</h2>
                <button id="closeAdminLogin" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="mb-6">
                <label for="adminPassword" class="block mb-2 text-gray-300">كلمة المرور:</label>
                <input type="password" id="adminPassword" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="أدخل كلمة المرور">
            </div>
            
            <button id="adminLoginBtn" class="btn-primary w-full py-3">
                <i class="fas fa-sign-in-alt mr-2"></i>
                دخول
            </button>
        </div>
    </div>

    <!-- Admin Panel Modal -->
    <div id="adminPanelModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden overflow-y-auto py-8">
        <div class="glass p-8 rounded-xl w-full max-w-4xl mx-4 max-h-full overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">لوحة التحكم - الأدمن</h2>
                <button id="closeAdminPanel" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <div class="p-4 rounded-lg bg-slate-800">
                    <h3 class="text-lg font-bold mb-3 flex items-center gap-2">
                        <i class="fas fa-key"></i>
                        توليد أكواد
                    </h3>
                    <p class="text-gray-300 mb-4">توليد أكواد للعملاء للنشر لمدة 7 أيام</p>
                    <button id="generateCodeBtn" class="btn-primary w-full">
                        توليد كود جديد
                    </button>
                    <div id="generatedCode" class="mt-4 p-3 bg-slate-700 rounded-lg text-center font-mono text-lg hidden"></div>
                </div>
                
                <div class="p-4 rounded-lg bg-slate-800">
                    <h3 class="text-lg font-bold mb-3 flex items-center gap-2">
                        <i class="fas fa-chart-bar"></i>
                        الإحصائيات
                    </h3>
                    <div class="space-y-2">
                        <div class="flex justify-between">
                            <span>إجمالي الزوار:</span>
                            <span id="totalVisitors" class="font-bold">1,245</span>
                        </div>
                        <div class="flex justify-between">
                            <span>إجمالي المنشورات:</span>
                            <span id="totalPosts" class="font-bold">86</span>
                        </div>
                        <div class="flex justify-between">
                            <span>الأكواد المستخدمة:</span>
                            <span id="usedCodes" class="font-bold">24</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mb-8">
                <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
                    <i class="fas fa-plus-circle"></i>
                    نشر منشور جديد
                </h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block mb-2 text-gray-300">العنوان:</label>
                        <input type="text" id="postTitle" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="أدخل عنوان المنشور">
                    </div>
                    
                    <div>
                        <label class="block mb-2 text-gray-300">الوصف:</label>
                        <textarea id="postDescription" rows="4" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="أدخل وصف المنشور"></textarea>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block mb-2 text-gray-300">القسم:</label>
                            <select id="postCategory" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="media">وسائل الإعلام الآلي</option>
                                <option value="electronics">الأجهزة الكهرو منزلية</option>
                                <option value="games">الألعاب</option>
                                <option value="health">الصحة ورياضة</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block mb-2 text-gray-300">الكلمات المفتاحية:</label>
                            <input type="text" id="postKeywords" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="كلمات مفتاحية مفصولة بفواصل">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block mb-2 text-gray-300">الصور/الفيديوهات:</label>
                        <input type="file" id="postMedia" multiple class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <button id="publishPostBtn" class="btn-primary w-full py-3">
                        <i class="fas fa-paper-plane mr-2"></i>
                        نشر المنشور
                    </button>
                </div>
            </div>
            
            <div>
                <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
                    <i class="fas fa-ad"></i>
                    إدارة الإعلانات
                </h3>
                
                <div class="space-y-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block mb-2 text-gray-300">نوع الإعلان:</label>
                            <select id="adType" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="image">صورة (5 ثواني)</option>
                                <option value="video">فيديو (24 ثانية)</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block mb-2 text-gray-300">رفع ملف:</label>
                            <input type="file" id="adFile" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>
                    
                    <button id="uploadAdBtn" class="btn-primary w-full py-3">
                        <i class="fas fa-upload mr-2"></i>
                        رفع الإعلان
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Customer Area Modal -->
    <div id="customerAreaModal" class="fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 hidden">
        <div class="glass p-8 rounded-xl w-full max-w-md mx-4">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">مساحة الزبون</h2>
                <button id="closeCustomerArea" class="text-gray-400 hover:text-white">
                    <i class="fas fa-times text-xl"></i>
                </button>
            </div>
            
            <div id="customerCodeSection">
                <div class="mb-6">
                    <label for="customerCode" class="block mb-2 text-gray-300">أدخل كود النشر:</label>
                    <input type="text" id="customerCode" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="أدخل الكود المكون من 8 أحرف">
                </div>
                
                <button id="verifyCodeBtn" class="btn-primary w-full py-3">
                    <i class="fas fa-check mr-2"></i>
                    التحقق من الكود
                </button>
            </div>
            
            <div id="customerPostForm" class="hidden">
                <h3 class="text-lg font-bold mb-4">نشر منشور جديد</h3>
                
                <div class="space-y-4">
                    <div>
                        <label class="block mb-2 text-gray-300">العنوان:</label>
                        <input type="text" id="customerPostTitle" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="أدخل عنوان المنشور">
                    </div>
                    
                    <div>
                        <label class="block mb-2 text-gray-300">الوصف:</label>
                        <textarea id="customerPostDescription" rows="4" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="أدخل وصف المنشور"></textarea>
                    </div>
                    
                    <div>
                        <label class="block mb-2 text-gray-300">القسم:</label>
                        <select id="customerPostCategory" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="media">وسائل الإعلام الآلي</option>
                            <option value="electronics">الأجهزة الكهرو منزلية</option>
                            <option value="games">الألعاب</option>
                            <option value="health">الصحة ورياضة</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block mb-2 text-gray-300">الكلمات المفتاحية:</label>
                        <input type="text" id="customerPostKeywords" class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="كلمات مفتاحية مفصولة بفواصل">
                    </div>
                    
                    <div>
                        <label class="block mb-2 text-gray-300">الصور/الفيديوهات:</label>
                        <input type="file" id="customerPostMedia" multiple class="w-full p-3 rounded-lg bg-slate-800 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <button id="customerPublishBtn" class="btn-primary w-full py-3">
                        <i class="fas fa-paper-plane mr-2"></i>
                        نشر المنشور
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Ad Modal -->
    <div id="adModal" class="fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 hidden">
        <div class="relative w-full max-w-2xl mx-4">
            <div id="adContent" class="rounded-xl overflow-hidden">
                <!-- Ad content will be inserted here -->
            </div>
            <div class="mt-4 text-center">
                <p id="adTimer" class="text-white text-lg"></p>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="glass mt-12 py-6">
        <div class="container mx-auto px-4 text-center">
            <p class="text-gray-300">© 2023 مكتبة العالم - جميع الحقوق محفوظة</p>
            <div class="flex justify-center gap-4 mt-4">
                <a href="https://www.facebook.com/profile.php?id=61580406166615&mibextid=rS40aB7S9Ucbxw6v" class="text-gray-400 hover:text-white transition-colors" target="_blank">
                    <i class="fab fa-facebook text-xl"></i>
                </a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors">
                    <i class="fab fa-twitter text-xl"></i>
                </a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors">
                    <i class="fab fa-instagram text-xl"></i>
                </a>
            </div>
        </div>
    </footer>

    <script>
        // البيانات الأساسية
        const categories = {
            media: "وسائل الإعلام الآلي",
            electronics: "الأجهزة الكهرو منزلية",
            games: "الألعاب",
            health: "الصحة ورياضة",
            phones: "مقارنة الهواتف"
        };

        // بيانات نموذجية للمنشورات
        let posts = JSON.parse(localStorage.getItem('worldLibraryPosts')) || [
            {
                id: 1,
                title: "أفضل أجهزة التلفاز الذكية لعام 2023",
                description: "مراجعة شاملة لأفضل أجهزة التلفاز الذكية المتاحة في السوق مع مقارنة بين المميزات والعيوب.",
                category: "media",
                keywords: ["تلفاز", "شاشة", "سمارت", "مراجعة"],
                media: [],
                date: "2023-10-15",
                author: "admin",
                expiresAt: null
            },
            {
                id: 2,
                title: "تمارين الصباح لزيادة النشاط اليومي",
                description: "مجموعة من التمارين الرياضية البسيطة التي يمكن ممارستها في الصباح لزيادة النشاط والطاقة طوال اليوم.",
                category: "health",
                keywords: ["تمارين", "رياضة", "صباح", "نشاط"],
                media: [],
                date: "2023-10-14",
                author: "admin",
                expiresAt: null
            },
            {
                id: 3,
                title: "ألعاب الفيديو الأكثر انتظارًا في 2024",
                description: "قائمة بأبرز ألعاب الفيديو التي سيتم إصدارها في العام القادم والتي يتطلع لها عشاق الألعاب.",
                category: "games",
                keywords: ["ألعاب", "فيديو", "2024", "إصدارات"],
                media: [],
                date: "2023-10-13",
                author: "admin",
                expiresAt: null
            }
        ];

        // بيانات مقارنة الهواتف
        const phoneComparison = [
            {
                name: "iPhone 15 Pro",
                screen: "6.1 بوصة",
                processor: "A17 Pro",
                memory: "8GB",
                camera: "48MP + 12MP + 12MP",
                battery: "3274 mAh",
                price: "$999"
            },
            {
                name: "Samsung Galaxy S23 Ultra",
                screen: "6.8 بوصة",
                processor: "Snapdragon 8 Gen 2",
                memory: "12GB",
                camera: "200MP + 10MP + 10MP + 12MP",
                battery: "5000 mAh",
                price: "$1199"
            },
            {
                name: "Google Pixel 8 Pro",
                screen: "6.7 بوصة",
                processor: "Google Tensor G3",
                memory: "12GB",
                camera: "50MP + 48MP + 48MP",
                battery: "5050 mAh",
                price: "$999"
            },
            {
                name: "OnePlus 11",
                screen: "6.7 بوصة",
                processor: "Snapdragon 8 Gen 2",
                memory: "16GB",
                camera: "50MP + 48MP + 32MP",
                battery: "5000 mAh",
                price: "$699"
            }
        ];

        // أكواد العملاء
        let customerCodes = JSON.parse(localStorage.getItem('worldLibraryCodes')) || [];

        // الإعلانات
        let ads = JSON.parse(localStorage.getItem('worldLibraryAds')) || [];

        // العناصر النشطة حالياً
        let activeTab = 'media';
        let activePosts = [];
        let currentAd = null;
        let adInterval = null;

        // تهيئة الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            initializePage();
            setupEventListeners();
            loadPostsByCategory(activeTab);
            
            // تنظيف المنشورات المنتهية الصلاحية
            cleanupExpiredPosts();
        });

        // تهيئة الصفحة
        function initializePage() {
            // حفظ البيانات في localStorage إذا لم تكن موجودة
            if (!localStorage.getItem('worldLibraryPosts')) {
                localStorage.setItem('worldLibraryPosts', JSON.stringify(posts));
            }
            
            if (!localStorage.getItem('worldLibraryCodes')) {
                localStorage.setItem('worldLibraryCodes', JSON.stringify(customerCodes));
            }
            
            if (!localStorage.getItem('worldLibraryAds')) {
                localStorage.setItem('worldLibraryAds', JSON.stringify(ads));
            }
            
            // تحديث عدد الزوار
            updateVisitorCount();
        }

        // إعداد مستمعي الأحداث
        function setupEventListeners() {
            // أزرار التبويب
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tab = this.getAttribute('data-tab');
                    switchTab(tab);
                });
            });

            // زر البحث
            document.getElementById('searchInput').addEventListener('input', function() {
                searchPosts(this.value);
            });

            // زر نشر جديد
            document.getElementById('newPostBtn').addEventListener('click', function() {
                document.getElementById('customerAreaModal').classList.remove('hidden');
            });

            // زر الترويج - تم تحديث الرابط
            document.getElementById('promoteBtn').addEventListener('click', function() {
                window.open('https://www.facebook.com/profile.php?id=61580406166615&mibextid=rS40aB7S9Ucbxw6v', '_blank');
            });

            // زر دخول الأدمن
            document.getElementById('adminAccessBtn').addEventListener('click', function() {
                document.getElementById('adminLoginModal').classList.remove('hidden');
            });

            // زر إغلاق نافذة الأدمن
            document.getElementById('closeAdminLogin').addEventListener('click', function() {
                document.getElementById('adminLoginModal').classList.add('hidden');
            });

            // زر دخول الأدمن
            document.getElementById('adminLoginBtn').addEventListener('click', function() {
                const password = document.getElementById('adminPassword').value;
                if (password === '2009bbh2009') {
                    document.getElementById('adminLoginModal').classList.add('hidden');
                    document.getElementById('adminPanelModal').classList.remove('hidden');
                    document.getElementById('adminPassword').value = '';
                    updateAdminStats();
                } else {
                    alert('كلمة المرور غير صحيحة!');
                }
            });

            // زر إغلاق لوحة الأدمن
            document.getElementById('closeAdminPanel').addEventListener('click', function() {
                document.getElementById('adminPanelModal').classList.add('hidden');
            });

            // زر توليد كود
            document.getElementById('generateCodeBtn').addEventListener('click', function() {
                generateCustomerCode();
            });

            // زر نشر منشور (الأدمن)
            document.getElementById('publishPostBtn').addEventListener('click', function() {
                publishPostAsAdmin();
            });

            // زر رفع إعلان
            document.getElementById('uploadAdBtn').addEventListener('click', function() {
                uploadAd();
            });

            // زر مساحة الزبون
            document.getElementById('customerAreaBtn').addEventListener('click', function() {
                document.getElementById('customerAreaModal').classList.remove('hidden');
            });

            // زر إغلاق مساحة الزبون
            document.getElementById('closeCustomerArea').addEventListener('click', function() {
                document.getElementById('customerAreaModal').classList.add('hidden');
                resetCustomerForm();
            });

            // زر التحقق من الكود
            document.getElementById('verifyCodeBtn').addEventListener('click', function() {
                verifyCustomerCode();
            });

            // زر نشر منشور (الزبون)
            document.getElementById('customerPublishBtn').addEventListener('click', function() {
                publishPostAsCustomer();
            });

            // عرض إعلان عشوائي كل 10 دقائق
            setInterval(showRandomAd, 600000);
        }

        // تبديل التبويبات
        function switchTab(tab) {
            // تحديث أزرار التبويب
            document.querySelectorAll('.tab-btn').forEach(btn => {
                if (btn.getAttribute('data-tab') === tab) {
                    btn.classList.add('tab-active');
                } else {
                    btn.classList.remove('tab-active');
                }
            });

            activeTab = tab;

            if (tab === 'phones') {
                document.getElementById('contentArea').classList.add('hidden');
                document.getElementById('compareSection').classList.remove('hidden');
                renderPhoneComparison();
            } else {
                document.getElementById('contentArea').classList.remove('hidden');
                document.getElementById('compareSection').classList.add('hidden');
                loadPostsByCategory(tab);
            }
        }

        // تحميل المنشورات حسب التصنيف
        function loadPostsByCategory(category) {
            // تصفية المنشورات حسب التصنيف والصلاحية
            activePosts = posts.filter(post => 
                post.category === category && 
                (!post.expiresAt || new Date(post.expiresAt) > new Date())
            );
            renderPosts(activePosts);
        }

        // عرض المنشورات
        function renderPosts(postsToRender) {
            const contentArea = document.getElementById('contentArea');
            
            if (postsToRender.length === 0) {
                contentArea.innerHTML = `
                    <div class="col-span-full text-center py-12">
                        <i class="fas fa-inbox text-5xl text-gray-500 mb-4"></i>
                        <h3 class="text-xl font-bold text-gray-400">لا توجد منشورات في هذا القسم بعد</h3>
                        <p class="text-gray-500 mt-2">كن أول من ينشر في هذا القسم!</p>
                    </div>
                `;
                return;
            }
            
            let postsHTML = '';
            
            postsToRender.forEach(post => {
                const isExpired = post.expiresAt && new Date(post.expiresAt) <= new Date();
                if (isExpired) return; // تخطي المنشورات المنتهية
                
                postsHTML += `
                    <div class="post-card glass p-6 rounded-xl">
                        <div class="flex justify-between items-start mb-4">
                            <h3 class="text-xl font-bold">${post.title}</h3>
                            <div class="flex flex-col items-end gap-1">
                                <span class="text-xs bg-blue-500 text-white px-2 py-1 rounded-full">${categories[post.category]}</span>
                                ${post.expiresAt ? `<span class="text-xs bg-amber-500 text-white px-2 py-1 rounded-full">ينتهي في: ${new Date(post.expiresAt).toLocaleDateString('ar-EG')}</span>` : ''}
                            </div>
                        </div>
                        
                        <p class="text-gray-300 mb-4">${post.description}</p>
                        
                        <div class="flex flex-wrap gap-2 mb-4">
                            ${post.keywords.map(keyword => `<span class="text-xs bg-slate-700 text-gray-300 px-2 py-1 rounded">#${keyword}</span>`).join('')}
                        </div>
                        
                        <div class="flex justify-between items-center text-sm text-gray-400">
                            <span>${post.date}</span>
                            <span>${post.author === 'admin' ? 'بواسطة: الأدمن' : 'بواسطة: زبون'}</span>
                        </div>
                    </div>
                `;
            });
            
            contentArea.innerHTML = postsHTML;
        }

        // عرض مقارنة الهواتف
        function renderPhoneComparison() {
            const compareTable = document.getElementById('compareTable');
            let tableHTML = '';
            
            phoneComparison.forEach(phone => {
                tableHTML += `
                    <tr class="border-b border-slate-700 hover:bg-slate-800 transition-colors">
                        <td class="p-4 font-bold">${phone.name}</td>
                        <td class="p-4">${phone.screen}</td>
                        <td class="p-4">${phone.processor}</td>
                        <td class="p-4">${phone.memory}</td>
                        <td class="p-4">${phone.camera}</td>
                        <td class="p-4">${phone.battery}</td>
                        <td class="p-4 font-bold text-green-400">${phone.price}</td>
                    </tr>
                `;
            });
            
            compareTable.innerHTML = tableHTML;
        }

        // البحث في المنشورات
        function searchPosts(query) {
            if (!query) {
                renderPosts(activePosts);
                return;
            }
            
            const filteredPosts = activePosts.filter(post => 
                post.title.toLowerCase().includes(query.toLowerCase()) ||
                post.description.toLowerCase().includes(query.toLowerCase()) ||
                post.keywords.some(keyword => keyword.toLowerCase().includes(query.toLowerCase()))
            );
            
            renderPosts(filteredPosts);
        }

        // تحديث عدد الزوار
        function updateVisitorCount() {
            let visitorCount = localStorage.getItem('worldLibraryVisitors') || 0;
            visitorCount = parseInt(visitorCount) + 1;
            localStorage.setItem('worldLibraryVisitors', visitorCount);
        }

        // تحديث إحصائيات الأدمن
